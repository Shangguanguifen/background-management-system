{"version":3,"sources":["service/productService.js","page/product/category/add.jsx"],"names":["_commonUtil","CommonUtil","Product","listParam","url","data","pageNum","listType","searchType","searchKeyword","request","type","productId","productInfo","categoryId","product","category","_product","Option","layout","labelCol","span","wrapperCol","tailLayout","offset","CategoryAdd","props","useState","categoryList","setCategoryList","useEffect","getCategoryList","then","res","catch","err","errorTips","name","onFinish","values","parentId","addCategory","categoryName","successTips","history","push","onFinishFailed","errorInfo","console","log","Item","label","initialValue","rules","required","message","style","width","marginRight","placeholder","value","map","id","htmlType"],"mappings":"6GAEIA,EAAc,I,MAAIC,GAEhBC,E,8FAEJ,SAAeC,GACb,IAAIC,EAAM,GACRC,EAAO,GAQT,OAPAA,EAAKC,QAAUH,EAAUG,QACC,SAAvBH,EAAUI,SACXH,EAAM,0BACyB,WAAvBD,EAAUI,WAClBH,EAAM,4BACNC,EAAKF,EAAUK,YAAcL,EAAUM,eAElCT,EAAYU,QAAQ,CACzBC,KAAM,OACNP,IAAKA,EACLC,KAAMA,M,wBAKV,SAAWO,GACT,OAAOZ,EAAYU,QAAQ,CACzBC,KAAM,OACNP,IAAK,4BACLC,KAAM,CACJO,UAAWA,GAAa,O,8BAM9B,SAAiBC,GACf,OAAOb,EAAYU,QAAQ,CACzBC,KAAM,OACNP,IAAK,qCACLC,KAAMQ,M,6BAKV,SAAgBC,GACd,OAAOd,EAAYU,QAAQ,CACzBC,KAAM,OACNP,IAAK,mCACLC,KAAM,CACJS,WAAYA,GAAc,O,wBAMhC,SAAWC,GACT,OAAOf,EAAYU,QAAQ,CACzBC,KAAM,OACNP,IAAK,0BACLC,KAAMU,M,gCAIV,SAAmBC,GACjB,OAAOhB,EAAYU,QAAQ,CACzBC,KAAM,OACNP,IAAK,wCACLC,KAAMW,M,yBAKV,SAAYA,GACV,OAAOhB,EAAYU,QAAQ,CACzBC,KAAU,OACVP,IAAU,mCACVC,KAAUW,Q,KAKDd,O,oMC5EXF,EAAc,IAAIC,IAChBgB,EAAW,IAAIf,IACbgB,E,IAAAA,OAGFC,EAAS,CACbC,SAAU,CACRC,KAAM,GAERC,WAAY,CACVD,KAAM,IAGJE,EAAa,CACjBD,WAAY,CACVE,OAAQ,EACRH,KAAM,KAwFKI,UApFK,SAACC,GAAW,IAAD,EACWC,mBAAS,IADpB,mBACtBC,EADsB,KACRC,EADQ,KAY7BC,qBAAU,WAPRb,EAASc,kBAAkBC,MAAK,SAAAC,GAC9BJ,EAAgBI,MACfC,OAAM,SAAAC,GACPnC,EAAYoC,UAAUD,QAMvB,IAqBH,OACE,8CACMhB,GADN,IAEEkB,KAAK,QACLC,SAtBa,SAACC,GAChB,IAAIC,EAAiC,uBAAtBD,EAAOzB,WAAuB,EAAIyB,EAAOzB,WACxDG,EAASwB,YAAY,CACnBD,SAAUA,EACVE,aAAcH,EAAOF,OACpBL,MAAK,SAAAC,GACNjC,EAAY2C,YAAYV,GACxBP,EAAMkB,QAAQC,KAAK,4BAClBX,OAAM,SAAAC,GACPnC,EAAYoC,UAAUD,OActBW,eAVmB,SAACC,GACtB/C,EAAYoC,UAAUW,GACtBC,QAAQC,IAAI,UAAWF,IAIvB,UAME,kBAAMG,KAAN,CACEC,MAAM,2BACNd,KAAK,aACLe,aAAa,qBACbC,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,gDAPf,SAWE,oBACEC,MAAO,CAAEC,MAAO,IAAKC,YAAa,IAElCC,YAAY,iCAHd,UAII,cAACzC,EAAD,CAAQ0C,MAAM,IAAd,gCACChC,EAAaiC,KAAI,SAAA7C,GAAQ,OACxB,eAACE,EAAD,CAAQ0C,MAAO5C,EAAS8C,GAAxB,gCAAmD9C,EAASqB,OAA3BrB,EAAS8C,YAIlD,kBAAMZ,KAAN,CACEC,MAAM,2BACNd,KAAK,OACLgB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,gDANf,SAUE,wBAEF,kBAAML,KAAN,2BAAe3B,GAAf,aACE,mBAAQZ,KAAK,UAAUoD,SAAS,SAAhC","file":"static/js/15.562adde0.chunk.js","sourcesContent":["import CommonUtil from 'util/common';\r\n\r\nlet _commonUtil = new CommonUtil();\r\n\r\nclass Product{\r\n  // 获取商品信息列表\r\n  getProductList(listParam) {\r\n    let url = '',\r\n      data = {};\r\n    data.pageNum = listParam.pageNum;\r\n    if(listParam.listType === 'list') {\r\n      url = '/manage/product/list.do';\r\n    } else if(listParam.listType === 'search') {\r\n      url = '/manage/product/search.do';\r\n      data[listParam.searchType] = listParam.searchKeyword\r\n    }\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: url,\r\n      data: data\r\n    })\r\n  }\r\n\r\n  // 获取商品详情\r\n  getProduct(productId) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/product/detail.do',\r\n      data: {\r\n        productId: productId || 0\r\n      }\r\n    })\r\n  }\r\n\r\n  // 变更商品销售状态\r\n  setProductStatus(productInfo) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/product/set_sale_status.do',\r\n      data: productInfo\r\n    })\r\n  }\r\n\r\n  // 获取品类列表\r\n  getCategoryList(categoryId) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/category/get_category.do',\r\n      data: {\r\n        categoryId: categoryId || 0\r\n      }\r\n    })\r\n  }\r\n\r\n  // 新增商品\r\n  addProduct(product) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/product/save.do',\r\n      data: product\r\n    })\r\n  }\r\n  // 修改品类名称\r\n  updateCategoryName(category) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/category/set_category_name.do',\r\n      data: category\r\n    })\r\n  }\r\n\r\n  // 新增商品品类\r\n  addCategory(category){\r\n    return _commonUtil.request({\r\n      type    : 'post',\r\n      url     : '/manage/category/add_category.do',\r\n      data    : category\r\n  });\r\n}\r\n\r\n}\r\nexport default Product;","import { useState, useEffect } from 'react'\nimport { Form, Input, Button, Select } from 'antd';\nimport Product from 'service/productService';\nimport CommonUtil from 'util/common';\n\nlet _commonUtil = new CommonUtil();\nconst _product = new Product();\nconst { Option } = Select;\n\n\nconst layout = {\n  labelCol: {\n    span: 4,\n  },\n  wrapperCol: {\n    span: 8,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 4,\n    span: 16,\n  },\n};\n\nconst CategoryAdd = (props) => {\n  const [categoryList, setCategoryList] = useState([]);\n\n  // 加载品类类表\n  const loadCategoryList = () => {\n    _product.getCategoryList().then(res => {\n      setCategoryList(res)\n    }).catch(err => {\n      _commonUtil.errorTips(err)\n    })\n  }\n\n  useEffect(() => {\n    loadCategoryList()\n  }, [])\n\n  // 商品添加数据提交\n  const onFinish = (values) => {\n    let parentId = values.categoryId === '根品类' ? 0 : values.categoryId;\n    _product.addCategory({\n      parentId: parentId,\n      categoryName: values.name\n    }).then(res => {\n      _commonUtil.successTips(res);\n      props.history.push('/product/categoryList');\n    }).catch(err => {\n      _commonUtil.errorTips(err);\n    })\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    _commonUtil.errorTips(errorInfo);\n    console.log('Failed:', errorInfo);\n  };\n\n  return (\n    <Form\n      {...layout}\n      name=\"basic\"\n      onFinish={onFinish}\n      onFinishFailed={onFinishFailed}\n    >\n      <Form.Item\n        label=\"所属品类\"\n        name=\"categoryId\"\n        initialValue='根品类'\n        rules={[\n          {\n            required: true,\n            message: '请选择商品品类!',\n          },\n        ]}\n      >\n        <Select\n          style={{ width: 186, marginRight: 14 }}\n          // defaultValue='0'\n          placeholder=\"请选择品类\">\n            <Option value=\"0\">根品类</Option>\n            {categoryList.map(category => (\n              <Option value={category.id} key={category.id}>根品类/{category.name}</Option>\n            ))}\n        </Select>\n      </Form.Item>\n      <Form.Item\n        label=\"品类名称\"\n        name=\"name\"\n        rules={[\n          {\n            required: true,\n            message: '请输入商品名称!',\n          },\n        ]}\n      >\n        <Input />\n      </Form.Item>\n      <Form.Item {...tailLayout}>\n        <Button type=\"primary\" htmlType=\"submit\">\n          Submit\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default CategoryAdd;"],"sourceRoot":""}