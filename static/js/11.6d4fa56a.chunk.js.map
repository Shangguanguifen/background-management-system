{"version":3,"sources":["service/productService.js","../node_modules/antd/lib/popconfirm/style/css.js","../node_modules/antd/lib/popover/style/css.js","../node_modules/antd/lib/popconfirm/index.js","../node_modules/antd/lib/_util/getRenderPropValue.js","page/product/category/index.jsx"],"names":["_commonUtil","CommonUtil","Product","listParam","url","data","pageNum","listType","searchType","searchKeyword","request","type","productId","productInfo","categoryId","product","category","require","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","_extends2","_slicedToArray2","React","_classnames","_useMergedState3","_ExclamationCircleFilled","_KeyCode","_tooltip","_button","_button2","_LocaleReceiver","_default2","_configProvider","_getRenderPropValue","_reactNode","_motion","_this","__rest","s","e","t","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","Popconfirm","forwardRef","props","ref","_useMergedState","visible","defaultValue","defaultVisible","_useMergedState2","setVisible","settingVisible","_a","onVisibleChange","onConfirm","onCancel","getPrefixCls","useContext","ConfigContext","customizePrefixCls","prefixCls","placement","children","overlayClassName","restProps","prefixClsConfirm","overlayClassNames","overlay","createElement","componentName","defaultLocale","popconfirmLocale","okButtonProps","cancelButtonProps","title","cancelText","okText","okType","icon","className","concat","getRenderPropValue","onClick","size","convertLegacyProps","renderOverlay","rootPrefixCls","disabled","transitionName","getTransitionName","cloneElement","onKeyDown","_b","isValidElement","keyCode","ESC","_onKeyDown","defaultProps","trigger","_default","propValue","_product","EditableCell","editing","dataIndex","inputType","record","index","inputNode","Item","name","style","margin","rules","required","message","CategoryList","useForm","form","useState","setData","editingKey","setEditingKey","setCategoryId","loadCategoryList","getCategoryList","then","res","forEach","item","key","id","catch","err","errorTips","useEffect","match","params","isEditing","cancel","save","a","validateFields","row","updateCategoryName","categoryName","successTips","console","log","mergedColumns","width","editable","render","_","marginRight","color","Link","setFieldsValue","edit","to","marginLeft","pointerEvents","map","col","onCell","component","fontWeight","components","body","cell","bordered","dataSource","columns","rowClassName","pagination","onChange"],"mappings":"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","file":"static/js/11.6d4fa56a.chunk.js","sourcesContent":["import CommonUtil from 'util/common';\r\n\r\nlet _commonUtil = new CommonUtil();\r\n\r\nclass Product{\r\n  // 获取商品信息列表\r\n  getProductList(listParam) {\r\n    let url = '',\r\n      data = {};\r\n    data.pageNum = listParam.pageNum;\r\n    if(listParam.listType === 'list') {\r\n      url = '/manage/product/list.do';\r\n    } else if(listParam.listType === 'search') {\r\n      url = '/manage/product/search.do';\r\n      data[listParam.searchType] = listParam.searchKeyword\r\n    }\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: url,\r\n      data: data\r\n    })\r\n  }\r\n\r\n  // 获取商品详情\r\n  getProduct(productId) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/product/detail.do',\r\n      data: {\r\n        productId: productId || 0\r\n      }\r\n    })\r\n  }\r\n\r\n  // 变更商品销售状态\r\n  setProductStatus(productInfo) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/product/set_sale_status.do',\r\n      data: productInfo\r\n    })\r\n  }\r\n\r\n  // 获取品类列表\r\n  getCategoryList(categoryId) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/category/get_category.do',\r\n      data: {\r\n        categoryId: categoryId || 0\r\n      }\r\n    })\r\n  }\r\n\r\n  // 新增商品\r\n  addProduct(product) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/product/save.do',\r\n      data: product\r\n    })\r\n  }\r\n  // 修改品类名称\r\n  updateCategoryName(category) {\r\n    return _commonUtil.request({\r\n      type: 'post',\r\n      url: '/manage/category/set_category_name.do',\r\n      data: category\r\n    })\r\n  }\r\n\r\n  // 新增商品品类\r\n  addCategory(category){\r\n    return _commonUtil.request({\r\n      type    : 'post',\r\n      url     : '/manage/category/add_category.do',\r\n      data    : category\r\n  });\r\n}\r\n\r\n}\r\nexport default Product;","\"use strict\";\n\nrequire(\"../../style/index.css\");\n\nrequire(\"../../popover/style/css\");\n\nrequire(\"../../button/style/css\");\n\nrequire(\"./index.css\");","\"use strict\";\n\nrequire(\"../../style/index.css\");\n\nrequire(\"./index.css\");","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _useMergedState3 = _interopRequireDefault(require(\"rc-util/lib/hooks/useMergedState\"));\n\nvar _ExclamationCircleFilled = _interopRequireDefault(require(\"@ant-design/icons/ExclamationCircleFilled\"));\n\nvar _KeyCode = _interopRequireDefault(require(\"rc-util/lib/KeyCode\"));\n\nvar _tooltip = _interopRequireDefault(require(\"../tooltip\"));\n\nvar _button = _interopRequireDefault(require(\"../button\"));\n\nvar _button2 = require(\"../button/button\");\n\nvar _LocaleReceiver = _interopRequireDefault(require(\"../locale-provider/LocaleReceiver\"));\n\nvar _default2 = _interopRequireDefault(require(\"../locale/default\"));\n\nvar _configProvider = require(\"../config-provider\");\n\nvar _getRenderPropValue = require(\"../_util/getRenderPropValue\");\n\nvar _reactNode = require(\"../_util/reactNode\");\n\nvar _motion = require(\"../_util/motion\");\n\nvar _this = void 0;\n\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar Popconfirm = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _useMergedState = (0, _useMergedState3[\"default\"])(false, {\n    value: props.visible,\n    defaultValue: props.defaultVisible\n  }),\n      _useMergedState2 = (0, _slicedToArray2[\"default\"])(_useMergedState, 2),\n      visible = _useMergedState2[0],\n      setVisible = _useMergedState2[1];\n\n  var settingVisible = function settingVisible(value, e) {\n    var _a;\n\n    setVisible(value);\n    (_a = props.onVisibleChange) === null || _a === void 0 ? void 0 : _a.call(props, value, e);\n  };\n\n  var onConfirm = function onConfirm(e) {\n    var _a;\n\n    settingVisible(false, e);\n    (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(_this, e);\n  };\n\n  var onCancel = function onCancel(e) {\n    var _a;\n\n    settingVisible(false, e);\n    (_a = props.onCancel) === null || _a === void 0 ? void 0 : _a.call(_this, e);\n  };\n\n  var _onKeyDown = function onKeyDown(e) {\n    if (e.keyCode === _KeyCode[\"default\"].ESC && visible) {\n      settingVisible(false, e);\n    }\n  };\n\n  var onVisibleChange = function onVisibleChange(value) {\n    var disabled = props.disabled;\n\n    if (disabled) {\n      return;\n    }\n\n    settingVisible(value);\n  };\n\n  var renderOverlay = function renderOverlay(prefixCls, popconfirmLocale) {\n    var okButtonProps = props.okButtonProps,\n        cancelButtonProps = props.cancelButtonProps,\n        title = props.title,\n        cancelText = props.cancelText,\n        okText = props.okText,\n        okType = props.okType,\n        icon = props.icon;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-inner-content\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message\")\n    }, icon, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message-title\")\n    }, (0, _getRenderPropValue.getRenderPropValue)(title))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-buttons\")\n    }, /*#__PURE__*/React.createElement(_button[\"default\"], (0, _extends2[\"default\"])({\n      onClick: onCancel,\n      size: \"small\"\n    }, cancelButtonProps), cancelText || popconfirmLocale.cancelText), /*#__PURE__*/React.createElement(_button[\"default\"], (0, _extends2[\"default\"])({\n      onClick: onConfirm\n    }, (0, _button2.convertLegacyProps)(okType), {\n      size: \"small\"\n    }, okButtonProps), okText || popconfirmLocale.okText)));\n  };\n\n  var _React$useContext = React.useContext(_configProvider.ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var customizePrefixCls = props.prefixCls,\n      placement = props.placement,\n      children = props.children,\n      overlayClassName = props.overlayClassName,\n      restProps = __rest(props, [\"prefixCls\", \"placement\", \"children\", \"overlayClassName\"]);\n\n  var prefixCls = getPrefixCls('popover', customizePrefixCls);\n  var prefixClsConfirm = getPrefixCls('popconfirm', customizePrefixCls);\n  var overlayClassNames = (0, _classnames[\"default\"])(prefixClsConfirm, overlayClassName);\n  var overlay = /*#__PURE__*/React.createElement(_LocaleReceiver[\"default\"], {\n    componentName: \"Popconfirm\",\n    defaultLocale: _default2[\"default\"].Popconfirm\n  }, function (popconfirmLocale) {\n    return renderOverlay(prefixCls, popconfirmLocale);\n  });\n  var rootPrefixCls = getPrefixCls();\n  return /*#__PURE__*/React.createElement(_tooltip[\"default\"], (0, _extends2[\"default\"])({}, restProps, {\n    prefixCls: prefixCls,\n    placement: placement,\n    onVisibleChange: onVisibleChange,\n    visible: visible,\n    overlay: overlay,\n    overlayClassName: overlayClassNames,\n    ref: ref,\n    transitionName: (0, _motion.getTransitionName)(rootPrefixCls, 'zoom-big', props.transitionName)\n  }), (0, _reactNode.cloneElement)(children, {\n    onKeyDown: function onKeyDown(e) {\n      var _a, _b;\n\n      if ( /*#__PURE__*/React.isValidElement(children)) {\n        (_b = children === null || children === void 0 ? void 0 : (_a = children.props).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n      }\n\n      _onKeyDown(e);\n    }\n  }));\n});\nPopconfirm.defaultProps = {\n  placement: 'top',\n  trigger: 'click',\n  okType: 'primary',\n  icon: /*#__PURE__*/React.createElement(_ExclamationCircleFilled[\"default\"], null),\n  disabled: false\n};\nvar _default = Popconfirm;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRenderPropValue = void 0;\n\nvar getRenderPropValue = function getRenderPropValue(propValue) {\n  if (!propValue) {\n    return null;\n  }\n\n  var isRenderFunction = typeof propValue === 'function';\n\n  if (isRenderFunction) {\n    return propValue();\n  }\n\n  return propValue;\n};\n\nexports.getRenderPropValue = getRenderPropValue;","import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom'\nimport { Table, Input, InputNumber, Popconfirm, Form, Typography, Button } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons'\n\nimport Product from 'service/productService';\nimport CommonUtil from 'util/common';\n\nlet _commonUtil = new CommonUtil();\nconst _product = new Product();\n\n\nconst EditableCell = ({\n  editing,\n  dataIndex,\n  title,\n  inputType,\n  record,\n  index,\n  children,\n  ...restProps\n}) => {\n  if(dataIndex === 'id') {\n    editing = false;\n  }\n  const inputNode = inputType === 'number' ? <InputNumber /> : <Input />;\n  return (\n    <td {...restProps}>\n      {editing ? (\n        <Form.Item\n          name={dataIndex}\n          style={{\n            margin: 0,\n          }}\n          rules={[\n            {\n              required: true,\n              message: `Please Input ${title}!`,\n            },\n          ]}\n        >\n          {inputNode}\n        </Form.Item>\n      ) : (\n        children\n      )}\n    </td>\n  );\n};\n\nconst CategoryList = (props) => {\n  const [form] = Form.useForm();\n  const [data, setData] = useState();\n  const [editingKey, setEditingKey] = useState('');\n  const [categoryId, setCategoryId] = useState(0);\n\n  // 加载品类列表\n  const loadCategoryList = (categoryId) => {\n    _product.getCategoryList(categoryId).then(res => {\n      res.forEach(item => {\n        item.key = item.id\n      })\n      setData(res);\n    }).catch(err => {\n      _commonUtil.errorTips(err);\n    })\n  }\n\n  useEffect(() => {\n    setCategoryId(props.match.params.id || 0)\n  }, [props.match.params.id])\n\n  useEffect(() => {\n    loadCategoryList(categoryId);\n  }, [categoryId])\n\n\n  const isEditing = (record) => record.key === editingKey;\n\n  const edit = (record) => {\n    form.setFieldsValue({\n      name: '',\n      ...record\n    });\n    setEditingKey(record.key);\n  };\n\n  const cancel = () => {\n    setEditingKey('');\n  };\n\n  // 更改品类名称\n  const save = async (key) => {\n    try {\n      const row = await form.validateFields();\n      _product.updateCategoryName({\n        categoryId: key,\n        categoryName: row.name\n      }).then(res => {\n        _commonUtil.successTips(res);\n        setEditingKey('')\n        loadCategoryList(categoryId);\n\n      }).catch(err => {\n        setEditingKey('')\n        _commonUtil.errorTips(err);\n      })\n      \n    } catch (errInfo) {\n      _commonUtil('Validate Failed:' + errInfo)\n      console.log('Validate Failed:', errInfo);\n    }\n  };\n\n  const columns = [\n    {\n      title: '品类Id',\n      dataIndex: 'id',\n      width: '15%',\n      editable: true,\n    },\n    {\n      title: '品类名称',\n      dataIndex: 'name',\n      width: '60%',\n      editable: true,\n    },\n    {\n      title: 'operation',\n      dataIndex: 'operation',\n      render: (_, record) => {\n        const editable = isEditing(record);\n        return <div>\n          {\n            editable ? (\n              <span>\n                <span\n                  onClick={() => save(record.key)}\n                  style={{\n                    marginRight: 8,\n                    color: '#1890ff'\n                  }}\n                >\n                  save\n                </span>\n                <Popconfirm title=\"Sure to cancel?\" onConfirm={cancel}>\n                  <span style={{color: '#1890ff'}}>Cancel</span>\n                </Popconfirm>\n              </span>\n            ) : (\n              <Typography.Link disabled={editingKey !== ''} onClick={() => edit(record)} >\n                修改名称\n              </Typography.Link>\n            )\n          }\n          {categoryId ? \n            null : <Link \n                      to={`/product/categoryList/${record.id}`} \n                      disabled={editingKey !== ''} \n                      style={{marginLeft: 16, pointerEvents: 'auto'}}>\n                        查看其子品类\n                  </Link>}\n        </div>\n      },\n    },\n  ];\n\n\n  const mergedColumns = columns.map((col) => {\n    if (!col.editable) {\n      return col;\n    }\n\n    return {\n      ...col,\n      onCell: (record) => ({\n        record,\n        inputType: col.dataIndex === 'age' ? 'number' : 'text',\n        dataIndex: col.dataIndex,\n        title: col.title,\n        editing: isEditing(record),\n      }),\n    };\n  });\n\n  return (\n    <Form form={form} component={false}>\n      <div>\n        <p>父品类Id: {categoryId}</p>\n      </div>\n      <Link to=\"/category/add\">\n          <Button type=\"primary\" size={'large'} className=\"table-button\" icon={<PlusOutlined style={{fontWeight: 700}}/>}>\n            添加商品\n          </Button>\n        </Link>\n      <Table\n        components={{\n          body: {\n            cell: EditableCell,\n          },\n        }}\n        bordered\n        dataSource={data}\n        columns={mergedColumns}\n        rowClassName=\"editable-row\"\n        pagination={{\n          onChange: cancel,\n        }}\n      />\n    </Form>\n  );\n};\n\nexport default CategoryList;"],"sourceRoot":""}