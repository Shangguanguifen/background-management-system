(this.webpackJsonpa=this.webpackJsonpa||[]).push([[11],{446:function(e,t,n){"use strict";var a=n(61),r=n(62),c=new(n(58).a),o=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,[{key:"getProductList",value:function(e){var t="",n={};return n.pageNum=e.pageNum,"list"===e.listType?t="/manage/product/list.do":"search"===e.listType&&(t="/manage/product/search.do",n[e.searchType]=e.searchKeyword),c.request({type:"post",url:t,data:n})}},{key:"getProduct",value:function(e){return c.request({type:"post",url:"/manage/product/detail.do",data:{productId:e||0}})}},{key:"setProductStatus",value:function(e){return c.request({type:"post",url:"/manage/product/set_sale_status.do",data:e})}},{key:"getCategoryList",value:function(e){return c.request({type:"post",url:"/manage/category/get_category.do",data:{categoryId:e||0}})}},{key:"addProduct",value:function(e){return c.request({type:"post",url:"/manage/product/save.do",data:e})}},{key:"updateCategoryName",value:function(e){return c.request({type:"post",url:"/manage/category/set_category_name.do",data:e})}},{key:"addCategory",value:function(e){return c.request({type:"post",url:"/manage/category/add_category.do",data:e})}}]),e}();t.a=o},633:function(e,t,n){"use strict";n(34),n(634),n(81),n(636)},634:function(e,t,n){"use strict";n(34),n(635)},635:function(e,t,n){},636:function(e,t,n){},637:function(e,t,n){"use strict";var a=n(2),r=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(7)),o=a(n(22)),i=r(n(0)),l=a(n(5)),u=a(n(134)),s=a(n(109)),d=a(n(146)),f=a(n(105)),p=a(n(59)),m=n(190),y=a(n(82)),b=a(n(104)),g=n(11),v=n(638),j=n(39),O=n(132),h=void 0,x=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},C=i.forwardRef((function(e,t){var n=(0,u.default)(!1,{value:e.visible,defaultValue:e.defaultVisible}),a=(0,o.default)(n,2),r=a[0],s=a[1],C=function(t,n){var a;s(t),null===(a=e.onVisibleChange)||void 0===a||a.call(e,t,n)},k=function(t){var n;C(!1,t),null===(n=e.onConfirm)||void 0===n||n.call(h,t)},P=function(t){var n;C(!1,t),null===(n=e.onCancel)||void 0===n||n.call(h,t)},w=i.useContext(g.ConfigContext).getPrefixCls,N=e.prefixCls,E=e.placement,I=e.children,T=e.overlayClassName,V=x(e,["prefixCls","placement","children","overlayClassName"]),_=w("popover",N),S=w("popconfirm",N),q=(0,l.default)(S,T),L=i.createElement(y.default,{componentName:"Popconfirm",defaultLocale:b.default.Popconfirm},(function(t){return function(t,n){var a=e.okButtonProps,r=e.cancelButtonProps,o=e.title,l=e.cancelText,u=e.okText,s=e.okType,d=e.icon;return i.createElement("div",{className:"".concat(t,"-inner-content")},i.createElement("div",{className:"".concat(t,"-message")},d,i.createElement("div",{className:"".concat(t,"-message-title")},(0,v.getRenderPropValue)(o))),i.createElement("div",{className:"".concat(t,"-buttons")},i.createElement(p.default,(0,c.default)({onClick:P,size:"small"},r),l||n.cancelText),i.createElement(p.default,(0,c.default)({onClick:k},(0,m.convertLegacyProps)(s),{size:"small"},a),u||n.okText)))}(_,t)})),F=w();return i.createElement(f.default,(0,c.default)({},V,{prefixCls:_,placement:E,onVisibleChange:function(t){e.disabled||C(t)},visible:r,overlay:L,overlayClassName:q,ref:t,transitionName:(0,O.getTransitionName)(F,"zoom-big",e.transitionName)}),(0,j.cloneElement)(I,{onKeyDown:function(e){var t,n;i.isValidElement(I)&&(null===(n=null===I||void 0===I?void 0:(t=I.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===d.default.ESC&&r&&C(!1,e)}(e)}}))}));C.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:i.createElement(s.default,null),disabled:!1};var k=C;t.default=k},638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderPropValue=void 0;t.getRenderPropValue=function(e){return e?"function"===typeof e?e():e:null}},648:function(e,t,n){"use strict";n.r(t);n(449);var a=n(452),r=n.n(a),c=(n(81),n(59)),o=n.n(c),i=(n(216),n(177)),l=n.n(i),u=(n(633),n(637)),s=n.n(u),d=n(499),f=n.n(d),p=n(500),m=n(60),y=n(37),b=(n(191),n(77)),g=n.n(b),v=(n(133),n(106)),j=n.n(v),O=(n(498),n(508)),h=n.n(O),x=n(181),C=n(0),k=n(31),P=n(646),w=n(446),N=n(58),E=n(4),I=new N.a,T=new w.a,V=function(e){var t=e.editing,n=e.dataIndex,a=e.title,r=e.inputType,c=(e.record,e.index,e.children),o=Object(x.a)(e,["editing","dataIndex","title","inputType","record","index","children"]);"id"===n&&(t=!1);var i="number"===r?Object(E.jsx)(h.a,{}):Object(E.jsx)(j.a,{});return Object(E.jsx)("td",Object(y.a)(Object(y.a)({},o),{},{children:t?Object(E.jsx)(g.a.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(a,"!")}],children:i}):c}))};t.default=function(e){var t=g.a.useForm(),n=Object(m.a)(t,1)[0],a=Object(C.useState)(),c=Object(m.a)(a,2),i=c[0],u=c[1],d=Object(C.useState)(""),b=Object(m.a)(d,2),v=b[0],j=b[1],O=Object(C.useState)(0),h=Object(m.a)(O,2),x=h[0],w=h[1],N=function(e){T.getCategoryList(e).then((function(e){e.forEach((function(e){e.key=e.id})),u(e)})).catch((function(e){I.errorTips(e)}))};Object(C.useEffect)((function(){w(e.match.params.id||0)}),[e.match.params.id]),Object(C.useEffect)((function(){N(x)}),[x]);var _=function(e){return e.key===v},S=function(){j("")},q=function(){var e=Object(p.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.validateFields();case 3:a=e.sent,T.updateCategoryName({categoryId:t,categoryName:a.name}).then((function(e){I.successTips(e),j(""),N(x)})).catch((function(e){j(""),I.errorTips(e)})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),I("Validate Failed:"+e.t0),console.log("Validate Failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),L=[{title:"\u54c1\u7c7bId",dataIndex:"id",width:"15%",editable:!0},{title:"\u54c1\u7c7b\u540d\u79f0",dataIndex:"name",width:"60%",editable:!0},{title:"operation",dataIndex:"operation",render:function(e,t){var a=_(t);return Object(E.jsxs)("div",{children:[a?Object(E.jsxs)("span",{children:[Object(E.jsx)("span",{onClick:function(){return q(t.key)},style:{marginRight:8,color:"#1890ff"},children:"save"}),Object(E.jsx)(s.a,{title:"Sure to cancel?",onConfirm:S,children:Object(E.jsx)("span",{style:{color:"#1890ff"},children:"Cancel"})})]}):Object(E.jsx)(l.a.Link,{disabled:""!==v,onClick:function(){return function(e){n.setFieldsValue(Object(y.a)({name:""},e)),j(e.key)}(t)},children:"\u4fee\u6539\u540d\u79f0"}),x?null:Object(E.jsx)(k.b,{to:"/product/categoryList/".concat(t.id),disabled:""!==v,style:{marginLeft:16,pointerEvents:"auto"},children:"\u67e5\u770b\u5176\u5b50\u54c1\u7c7b"})]})}}].map((function(e){return e.editable?Object(y.a)(Object(y.a)({},e),{},{onCell:function(t){return{record:t,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:_(t)}}}):e}));return Object(E.jsxs)(g.a,{form:n,component:!1,children:[Object(E.jsx)("div",{children:Object(E.jsxs)("p",{children:["\u7236\u54c1\u7c7bId: ",x]})}),Object(E.jsx)(k.b,{to:"/category/add",children:Object(E.jsx)(o.a,{type:"primary",size:"large",className:"table-button",icon:Object(E.jsx)(P.a,{style:{fontWeight:700}}),children:"\u6dfb\u52a0\u5546\u54c1"})}),Object(E.jsx)(r.a,{components:{body:{cell:V}},bordered:!0,dataSource:i,columns:L,rowClassName:"editable-row",pagination:{onChange:S}})]})}}}]);
//# sourceMappingURL=11.6d4fa56a.chunk.js.map